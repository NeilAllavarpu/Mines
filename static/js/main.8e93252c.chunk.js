(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e){e.exports={a:{INPUT:-1,IN_PROGRESS:0,LOSS:1,PAUSE:3,WIN:2},b:{HIDDEN:0,MARKED:1,REVEALED:2}}},11:function(e,t,n){e.exports=n(18)},16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(9),r=n.n(s),l=n(7),u=n(2),o=n(3),h=n(5),m=n(4),c=n(6),p=(n(16),n(10)),d=n(1);function f(e){var t=e.mine,n=e.mineSize,a=e.handleClick,s=e.handleRightClick,r="mine ".concat(t.customClasses),l=null;return t.state===d.b.REVEALED?!0===t.isMine?(r+=" mineLoss",l="X"):(r+=" mineNum".concat(t.minesNear),0!==t.minesNear&&(l=t.minesNear)):t.state===d.b.MARKED&&(l="!"),i.a.createElement("div",{className:r,onClick:a,onContextMenu:s,style:{fontSize:n,height:n,lineHeight:n,width:n}},i.a.createElement("div",{className:"label"},l))}var v=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(h.a)(this,Object(m.a)(t).call(this,e))).start=Date.now(),n.state={last:Date.now(),timePassed:0},n.requestID=null,n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.requestID=window.requestAnimationFrame(function(){e.updateTimer()})}},{key:"updateTimer",value:function(){var e=this;this.setState(function(e){return{last:Date.now(),timePassed:e.timePassed+(Date.now()-e.last)}},function(){!0===e.props.running&&window.requestAnimationFrame(e.updateTimer.bind(e))})}},{key:"componentWillUnmount",value:function(){window.cancelAnimationFrame(this.requestID)}},{key:"resume",value:function(){var e=this;this.setState({last:Date.now()},function(){window.requestAnimationFrame(e.updateTimer.bind(e))})}},{key:"getTime",value:function(){return this.state.timePassed/1e3}},{key:"render",value:function(){if(!0===this.props.display){var e=Math.floor(this.state.timePassed/1e3),t=Math.floor(e/60),n=(e%60).toLocaleString([],{minimumIntegerDigits:2});return i.a.createElement("div",null,"Time: ",t,":",n)}return null}}]),t}(i.a.Component),g=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=localStorage.getItem("scores");return e?(e=e.split(","),i.a.createElement("div",null,i.a.createElement("h2",null,"Fastest Times"),i.a.createElement("ol",null,e.map(function(e){return i.a.createElement("li",null,Math.floor(e/60),":",(e%60).toLocaleString([],{minimumIntegerDigits:2}))})),i.a.createElement("button",{onClick:this.props.updateState.bind(this,{playing:d.a.INPUT})},"Restart"))):i.a.createElement("div",null,"Play to get some times here!")}}]),t}(i.a.Component),E=function(e){function t(e){var n;Object(u.a)(this,t);var a=[];(n=Object(h.a)(this,Object(m.a)(t).call(this,e))).timer=i.a.createRef(),n.markedNum=0;for(var s=0;s<e.height;++s){a.push([]);for(var r=0;r<e.width;++r)a[s].push({customClasses:"",isMine:!1,minesNear:0,state:d.b.HIDDEN})}return n.firstClick=!0,n.state={mines:a,hasFinished:!1},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"getMinesToTest",value:function(e,t){var n=[];return e>0&&(t>0&&n.push([e-1,t-1]),n.push([e-1,t]),t<this.props.height-1&&n.push([e-1,t+1])),t>0&&n.push([e,t-1]),t<this.props.height-1&&n.push([e,t+1]),e<this.props.width-1&&(t>0&&n.push([e+1,t-1]),n.push([e+1,t]),t<this.props.height-1&&n.push([e+1,t+1])),n}},{key:"revealNear",value:function(e,t,n){var a=this.getMinesToTest(t,n),i=a.reduce(function(t,n){return e[n[1]][n[0]].state===d.b.MARKED?t+1:t},0);if(e[n][t].minesNear===i)for(var s=0;s<a.length;s++){var r=a[s],l=e[r[1]][r[0]];if(l.state===d.b.MARKED&&!1===l.isMine)return this.triggerLoss(),{mineRevealed:!0,mines:e};var u=e[r[1]][r[0]];if(u.state===d.b.HIDDEN){if(u.isMine)return this.triggerLoss(),{mineRevealed:!0,mines:e};u.state=d.b.REVEALED;var o=this.revealNear(e,r[0],r[1]);!1===o.mineRevealed&&(e=o.mines)}}return{mineRevealed:!1,mines:e}}},{key:"triggerLoss",value:function(){this.setState(function(e){return{mines:e.mines.map(function(e){return e.map(function(e){var t=Object(p.a)({},e);return!1===t.isMine&&t.state===d.b.MARKED&&(t.customClasses+=" falseMark"),t.state===d.b.HIDDEN&&(t.customClasses+=" after"),!0===t.isMine&&t.state===d.b.MARKED||(t.state=d.b.REVEALED),t})})}})}},{key:"handleClick",value:function(e,n){var a=this,i=this.state.mines;if(!0===this.firstClick)this.setState(function(t){for(var i=[],s=0;s<t.mines.length;++s)for(var r=0;r<t.mines[s].length;++r)r===e&&s===n||i.push([r,s]);for(var l=0;l<a.props.numMines;++l){var u=Math.floor(Math.random()*i.length),o=i[u];i.splice(u,1),t.mines[o[1]][o[0]].isMine=!0,a.getMinesToTest(o[0],o[1]).forEach(function(e){++t.mines[e[1]][e[0]].minesNear})}return{mines:t.mines}},function(){a.firstClick=!1,a.handleClick(e,n)});else if(this.props.playing===d.a.IN_PROGRESS&&this.state.mines[n][e].state!==d.b.MARKED)if(i[n][e].state=d.b.REVEALED,i[n][e].isMine)this.props.updateState({playing:d.a.LOSS}),i[n][e].customClasses+=" mineLossClick",this.setState({mines:i},this.triggerLoss);else{var s=this.revealNear(i,e,n);if(!0===s.mineRevealed)this.props.updateState({playing:d.a.LOSS}),this.triggerLoss();else if(0===t.validSquaresLeft(s.mines)){this.props.updateState({playing:d.a.WIN});var r=localStorage.getItem("scores").split(",");r=r.map(function(e){return parseFloat(e)}),console.log(r),r.push(this.timer.getTime()),r.sort(),r.splice(10),localStorage.setItem("scores",r),console.log(localStorage.getItem("scores").split(",")),this.setState({mines:s.mines.map(function(e){return e.map(function(e){var t=e;return!0===t.isMine&&(t.state=d.b.MARKED),t})}),hasFinished:!0})}else this.setState({mines:s.mines})}}},{key:"handleRightClick",value:function(e,t){var n=this;if(this.props.playing===d.a.IN_PROGRESS){var a=this.state.mines[t][e];a.state!==d.b.REVEALED&&this.setState(function(i){return a.state===d.b.MARKED?(i.mines[t][e].state=d.b.HIDDEN,--n.markedNum):(i.mines[t][e].state=d.b.MARKED,++n.markedNum),{mines:i.mines}})}}},{key:"render",value:function(){var e,n,a,s,r,l,u=this,o=this.props,h=o.width,m=o.height,c=o.numMines,p=o.playing;(n=!0===this.firstClick?0:100-100*t.validSquaresLeft(this.state.mines)/(m*h-c),p===d.a.PAUSE)?e=i.a.createElement("div",null,"Paused",i.a.createElement("br",null),i.a.createElement("button",{onClick:function(){u.props.updateState({playing:d.a.IN_PROGRESS}),u.timer.resume()}},"Resume")):(p===d.a.IN_PROGRESS?(s=i.a.createElement("div",{className:"status"},i.a.createElement("div",null,"Mines Left: ",Math.max(this.props.numMines-this.markedNum,0)),i.a.createElement("div",null,"Progress:",i.a.createElement("div",{className:"bar"},i.a.createElement("div",{className:"innerBar",style:{width:"".concat(n,"%")}},Math.round(10*n)/10,"%")))),a=i.a.createElement("button",{onClick:this.props.updateState.bind(this,{playing:d.a.PAUSE})},"Pause")):a=i.a.createElement("button",{onClick:this.props.updateState.bind(this,{playing:d.a.INPUT})},"Restart"),p===d.a.WIN?r=i.a.createElement("div",{className:"status win"},"Good job!"):p===d.a.LOSS&&(r=i.a.createElement("div",{className:"status"},"You lost!")),l=80/this.props.width<80/this.props.height?"".concat(80/this.props.width,"vw"):"".concat(80/this.props.height,"vh"),e=i.a.createElement("div",null,i.a.createElement("div",{className:"board"},this.state.mines.map(function(e,t){return i.a.createElement("div",{className:"row",key:t},e.map(function(e,n){return i.a.createElement(f,{key:n,mine:e,handleClick:function(){u.handleClick(n,t)},mineSize:l,handleRightClick:function(e){e.preventDefault(),u.handleRightClick(n,t)}})}))})),s,r,a));return this.state.hasFinished&&(e=i.a.createElement(g,{updateState:this.props.updateState.bind(this)})),i.a.createElement("div",null,!this.firstClick&&i.a.createElement(v,{running:p===d.a.IN_PROGRESS,display:p!==d.a.PAUSE&&p!==d.a.WIN,ref:function(e){u.timer=e}}),e)}}],[{key:"validSquaresLeft",value:function(e){return e.reduce(function(e,t){return e+t.reduce(function(e,t){return t.state===d.b.HIDDEN&&!1===t.isMine?e+1:e},0)},0)}}]),t}(i.a.Component);function b(e){var t=e.handleInputChange,n=e.handleSubmit,a=e.height,s=e.numMines,r=e.width;return i.a.createElement("form",{onSubmit:n.bind(this)},i.a.createElement("label",null,"Board width ",i.a.createElement("input",{type:"number",min:1,max:Math.floor(window.innerWidth/6),value:r,name:"width",onChange:t.bind(this)})),i.a.createElement("label",null,"Board height ",i.a.createElement("input",{type:"number",min:1,value:a,name:"height",onChange:t.bind(this)})),i.a.createElement("label",null,"Number of mines ",i.a.createElement("input",{type:"number",min:1,max:r*a-1,value:s,name:"numMines",onChange:t.bind(this)})),i.a.createElement("input",{type:"submit",value:"Play!"}))}var S=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={height:15,numMines:75,playing:d.a.INPUT,width:30},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("blur",function(){e.state.playing===d.a.IN_PROGRESS&&e.setState({playing:d.a.PAUSE})})}},{key:"updateState",value:function(e){this.setState(e)}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({playing:d.a.IN_PROGRESS})}},{key:"handleInputChange",value:function(e){this.setState(Object(l.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return this.state.playing===d.a.INPUT?i.a.createElement(b,{width:this.state.width,height:this.state.height,numMines:this.state.numMines,handleSubmit:this.handleSubmit.bind(this),handleInputChange:this.handleInputChange.bind(this)}):i.a.createElement(E,{width:this.state.width,height:this.state.height,numMines:this.state.numMines,playing:this.state.playing,updateState:this.updateState.bind(this)})}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[11,2,1]]]);
//# sourceMappingURL=main.8e93252c.chunk.js.map